<!DOCTYPE html>
<html lang="en">
  <%- include('../partials/head.ejs') %>
  <!-- let add a link to delete a particular items  -->
  <!-- data-doc attribute -->
  <!-- dataset method in js -->

  <body>
    <%- include('../partials/nav.ejs') %>
    <h2 style="text-align: center">Welcome to my EJS details Pages</h2>
    <div class="details">
      <div class="inner-details">
        <!-- <h2><%= Blogs.name %> </h2> -->
        <p><%= Blogs.title %></p>
        <p><%= Blogs.message %></p>
      </div>
      <a class="delete" data-doc="<%= Blogs._id %> ">Delete</a>
    </div>

    <%- include('../partials/footer.ejs') %>

    <script>
      //  ======== FOR THE CLIENT SIDE ========//
      const DIRT = document.querySelector("a.delete");
      DIRT.addEventListener("click", () => {
        const endPoint = `/index/${DIRT.dataset.doc}`;
        fetch(endPoint, {
          method: "DELETE",
        })
          .then((Response) => Response.json())
          .then((data) => (window.location.href = data.redirect))
          .catch((err) => console.log(err));
      });
    </script>
  </body>
</html>
